(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a4381"],{"0605":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e.dialogVisible?a("vxe-modal",{attrs:{loading:e.newLoading,title:"选择所属单位",width:"25%",height:"70vh",showFooter:"","esc-closable":"","show-zoom":"",resize:""},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[a("div",{staticClass:"head-container"},[a("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请输入单位名称进行搜索",clearable:"",size:"small","prefix-icon":"el-icon-search"},model:{value:e.deptName,callback:function(t){e.deptName=t},expression:"deptName"}})],1),a("div",{staticClass:"head-container"},[a("el-tree",{ref:"tree",attrs:{data:e.deptOptions,props:e.defaultProps,"expand-on-click-node":!1,"filter-node-method":e.filterNode,"node-key":"id","highlight-current":"","render-content":e.renderContent},on:{"node-click":e.handleNodeClick}})],1),a("div",{staticClass:"dialog-footer dialog-footer-center",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.submitForm}},[a("svg-icon",{attrs:{"icon-class":"confirm1","class-name":"custom-class"}}),e._v("确 定 ")],1),a("el-button",{on:{click:e.cancel}},[a("svg-icon",{attrs:{"icon-class":"cancel1","class-name":"custom-class"}}),e._v("取 消 ")],1)],1)]):e._e()],1)},n=[],l=(a("4de4"),a("d3b7"),a("0643"),a("2382"),a("c0c7")),o=a("fcb7"),s=(a("6319"),{inject:["updateDeptLabel","updateDeptId"],name:"deptTree",data:function(){return{newLoading:!1,dialogVisible:!1,deptName:void 0,deptOptions:void 0,defaultProps:{children:"children",label:"label"},deptLable:null,todayLabel:null,superiorLabel:null,todayDeptId:null}},watch:{deptName:function(e){this.$refs.tree.filter(e)}},methods:{cancel:function(){this.dialogVisible=!1},renderContent:function(e,t){var a=t.node;t.data,t.store;return e("span",[e("svg-icon",{attrs:{"icon-class":"unit","class-name":"custom-class"}})," ",a.label])},submitForm:function(){this.dialogVisible=!1,this.updateDeptLabel(this.deptLable),this.updateDeptId(this.todayDeptId),this.dialogVisible=!1},handleOpen:function(){var e=this;this.newLoading=!0,this.deptLable=null,this.dialogVisible=!0,this.getDeptTree(),setTimeout((function(){e.newLoading=!1}),800)},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},getDeptTree:function(){var e=this;Object(l["a"])().then((function(t){e.deptOptions=t.data}))},handleNodeClick:function(e){var t=this;this.todayDeptId=e.id,this.todayLabel=e.label,this.$modal.loading("正在获取部门数据，请稍后..."),this.getFullDeptLabel(this.todayDeptId).then((function(e){t.deptLable=e,t.$modal.closeLoading()}))},getFullDeptLabel:function(e){var t=this;return Object(o["a"])(e).then((function(e){return e.data.parentId?t.getFullDeptLabel(e.data.parentId).then((function(t){return t+"/"+e.data.deptName})):e.data.deptName}))}}}),d=s,c=a("2877"),r=Object(c["a"])(d,i,n,!1,null,"35e3ac2a",null);t["default"]=r.exports}}]);